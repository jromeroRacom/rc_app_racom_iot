<div class="limiter">
  <div class="container-login100">
    <div class="wrap-login100">
      <form class="login100-form" [formGroup]="resetPassForm" (ngSubmit)="onSubmit()">
        <span class="error-header p-b-45">

        </span>

        <span class="error-subheader p-b-5">
          Reestablecer contraseña
        </span>
        <span class="error-subheader2 p-b-5">
          Ingresa la nueva contraseña
        </span>
        <br>

        <mat-spinner *ngIf="loading" style="margin:0 auto;" mode="indeterminate"></mat-spinner>

        <div *ngIf="!loading && error"  class="alert alert-danger">
          <strong>¡Algo salio mal!</strong>
          <ul>
            <li *ngFor="let error of listErrors.errors">{{error.msg}}</li>
          </ul>
        </div>

        <div *ngIf="!loading && !error && submitted" class="alert alert-success">
          <strong>¡Todo listo!</strong> {{msg}}
        </div>

        <div class="form-group auth-form-group mb-4" *ngIf="!loading">
          <mat-icon matSuffix (click)="hide = !hide" class="auth-page-icon">
            {{hide ? 'visibility_off' : 'visibility'}}
          </mat-icon>
          <input type="password" formControlName="password" class="form-control auth-control"
            id="password" [type]="hide ? 'password' : 'text'" required autocomplete="new-password"
            [ngClass]="{ 'is-invalid': formValidators.fieldValidate('password') }"
            placeholder="Contraseña" />
          <div *ngIf="formValidators.fieldValidate('password')" class="invalid-feedback">
            <div >{{formValidators.getError('password')}}</div>
          </div>
        </div>

        <div class="form-group auth-form-group mb-4" *ngIf="!loading">
          <mat-icon matSuffix (click)="chide = !chide" class="auth-page-icon">
            {{chide ? 'visibility_off' : 'visibility'}}
          </mat-icon>
          <input [type]="chide ? 'password' : 'text'" formControlName="cpassword"
          required autocomplete="new-password"
          class="form-control auth-control"
            id="cpassword" [ngClass]="{ 'is-invalid': formValidators.comparePasswords('password', 'cpassword') }"
            placeholder="Confirm Password" />
          <div *ngIf="formValidators.comparePasswords('password', 'cpassword')" class="invalid-feedback">
            <div > Las contraseñas no coinciden</div>
          </div>
        </div>

        <div class="flex-sb-m w-full p-t-15 p-b-20">
          <div>
            <span>¿Recordaste tu contraseña? <a routerLink="/auth/signin">
              Ingresar
              </a></span>
          </div>
        </div>

        <div class="container-login100-form-btn" *ngIf="!loading">
          <button mat-flat-button color="primary" class="login100-form-btn" type="submit" [disabled]="!resetPassForm.valid">
            Registrar
          </button>
        </div>

        <div class="w-full p-t-15 p-b-15 text-center">
          <div>
            <a href="http://www.racom.com.mx/SistemasHidraulicos/Contacto.php" class="txt1">
              ¿Necesitas ayuda?
            </a>
          </div>
        </div>

      </form>
      <div class="login100-more" style="background-image: url('assets/images/pages/bg-03.png');">
      </div>
    </div>
  </div>
</div>
